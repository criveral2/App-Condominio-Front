<div
  *ngIf="isOpenUpdateProfile"
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
>
  <div
    class="relative bg-white rounded-xl shadow-xl w-[95%] sm:w-[500px] md:w-[650px] lg:w-[650px] max-h-[96vh] overflow-y-auto p-6"
  >
    <!-- Botón de cerrar (X) -->
    <button
      (click)="onClose()"
      class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition"
    >
      ✕
    </button>

    <!-- Título -->
    <h2 class="text-xl font-semibold text-gray-700 mb-4">
      {{ soloLectura ? 'Residente' : 'Actualizar Residente' }}
    </h2>
    <hr class="mb-4">

    <!-- Formulario -->
    <form [formGroup]="myForm" autocomplete="off" (ngSubmit)="onUpdate()" class="space-y-4">
<!-- Usuario y Contraseña -->
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
  
        <!-- Código del usuario -->
        <div>
          <label for="userid" class="block text-sm font-medium text-gray-600 mb-1">Código del usuario</label>
          <span
            id="userid"
            class="block w-full rounded-lg border border-gray-300 p-2 bg-gray-100 text-gray-700"
          >{{usuario?.idUser}}</span>
        </div>

        <!-- Usuario -->
        <div>
          <label for="username" class="block text-sm font-medium text-gray-600 mb-1">Usuario</label>
          <input
            id="username"
            name="username"
            type="text"
            formControlName="username"
            placeholder="Usuario"
            class="block w-full rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"
          >
          <span *ngIf="isValid('username')" class="text-xs text-red-500 mt-1">{{ getFieldError('username') }}</span>
        </div>

      </div>


      <!-- Nombre -->
      <div>
        <label for="name" class="block text-sm font-medium text-gray-600">Nombre</label>
        <input id="name" name="name" type="text"
               formControlName="name"
               placeholder="Nombre completo"
               class="mt-1 block w-full rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
        <span *ngIf="isValid('name')" class="text-xs text-red-500">{{getFieldError('name')}}</span>
      </div>

      <!-- Correo -->
      <div>
        <label for="email" class="block text-sm font-medium text-gray-600">Correo</label>
        <input id="email" name="email" type="email"
               formControlName="email"
               placeholder="correo@ejemplo.com"
               class="mt-1 block w-full rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
         <span *ngIf="isValid('email')"  class="text-xs text-red-500">{{getFieldError('email')}}</span>
      </div>

      <!-- CI y Teléfono -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label for="ci" class="block text-sm font-medium text-gray-600">CI</label>
          <input id="ci" name="ci" type="text"
                 formControlName="ci"
                 placeholder="Cédula"
                 class="mt-1 block w-full rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
           <span *ngIf="isValid('ci')"  class="text-xs text-red-500">{{getFieldError('ci')}}</span>
        </div>
        <div>
          <label for="phone" class="block text-sm font-medium text-gray-600">Teléfono</label>
          <input id="phone" name="phone" type="text"
                 formControlName="phone"
                 placeholder="Teléfono"
                 class="mt-1 block w-full rounded-lg border border-gray-300 p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
           <span *ngIf="isValid('phone')"  class="text-xs text-red-500">{{getFieldError('phone')}}</span>
        </div>
      </div>

      <!-- Tipo de usuario -->
      <div>
        <label for="idTypeUser" class="block text-sm font-medium text-gray-600">Tipo de usuario</label>
        <select id="idTypeUser" name="idTypeUser"
                formControlName="idTypeUser"
                placeholder="Seleccione un tipo de usuario"
                class="mt-1 block w-full rounded-lg border border-gray-300 p-2 bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none">
          <option *ngFor="let tipoRol of tipoUsuario?.data" [value]="tipoRol.id">{{tipoRol.permission}}</option>
        </select>
        <span *ngIf="isValid('idTypeUser')"  class="text-xs text-red-500">{{getFieldError('idTypeUser')}}</span>
      </div>

      <!-- Botones -->
      <div class="flex justify-end space-x-3 pt-4">
        <button type="button"
                (click)="onClose()"
                class="px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-100">
          Cancelar
        </button>
        <button *ngIf="!soloLectura" type="submit"
                class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
